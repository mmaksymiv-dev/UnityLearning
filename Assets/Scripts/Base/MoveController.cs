using UnityEngine;

public class MovedController : MonoBehaviour
{
    [SerializeField] private Rigidbody _rb;
    [SerializeField] private float _moveSpeed = 0.5f;
    [SerializeField] private float _rotationSpeed = 0.5f;
    [SerializeField] private Vector3 _targetPoint = new Vector3(10f, 0f, 10f);

    private void FixedUpdate()
    {
        // ???????? ?? ???? (? ??????? XZ)
        Vector3 direction = (_targetPoint - _rb.position);
        direction.y = 0f; // ????????? ?????? ?? Y

        // ???? ???? ??????? — ???????????
        if (direction.magnitude < 0.1f)
        {
            _rb.linearVelocity = Vector3.zero;
            return;
        }

        // ?????? ????????? ???????? ?? ????
        Quaternion targetRotation = Quaternion.LookRotation(direction);
        _rb.rotation = Quaternion.Slerp(_rb.rotation, targetRotation, _rotationSpeed * Time.fixedDeltaTime);

        // ??????? ?????? ? ???????? ???? ???????
        _rb.MovePosition(_rb.position + transform.forward * _moveSpeed * Time.fixedDeltaTime);
    }
}
